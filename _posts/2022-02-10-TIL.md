---
title: TIL 2022-02-10 딥러닝 휴강 -> 스프링 복습 2 !
tags: [TIL, JAVA, SPRING]
categories: TIL
---

#오늘 배운 것 
- Servlet Application 만들기 
  - servlet 을 만들고, HttpServlet 상속, WebServlet 어노테이션(name, urlPatterns 지정)
  - response
    - ContentType, CharacterEncoding 등을 입력 하고, 
    - PrintWriter 객체에 html 을 직접 넣어서 응답해주면 웹브라우저가 html 코드를 읽고 쏴준다. 
  - 자바 코드로 request, response 객체를 관리, 비지니스 로직을 수행 할 수 있어서 편하지만, 
  - html 코드를 자바로 넣어줘야해서 불편함, 오류 발생가능성, 가독성 측면에서 매우 안좋았다. 
- JSP Application 만들기 
  - build.gradle 
    - implementation 'org.apache.tomcat.embed:tomcat-embed-jasper'
    - implementation 'javax.servlet:jstl'
  - webapp 밑에서 개발 
    - jsp 안에서 html 그대로 사용 가능
    - jsp 안에서 <% %> 코드를 감싸서 자바 코드 사용 가능 (<%= %> 은 자바코드 출력)
    - jsp 안에서 request, response 객체 사용 가능 -> servlet service 처럼 사용! (서블릿 자동 변환됨)
  - 비지니스로직과 view 에 관한 기능을 하나의 페이지에서 하게 됨(수많은 코드가 jsp에 노출됨) -> 보수 관리 어려움 
- MVC 패턴 - 개요
  - servlet 과 jsp 문제점 
    - 비지니스 로직과 뷰 렌더링은 변경 라이프 사이클이 다르다. 그런데 하나의 코드로 관리 하게 되면 유지보수 하기 좋지 않다. 
    - 역할 분리를 할 필요가 있다. 
  - Model View Controller 
    - controller : http 요청을 받아서 파라미터를 검증 하고 비지니스 로직을 실행한다. 그리고 뷰에 전달할 데이터를 조회, 모델에 담는다. (servlet)
    - model : 뷰에 출력할 데이터를 담아둔다. 
    - view : 모델에 담겨있는 데이터를 사용해서 화면을 그리는데 집중 한다(html 생성)(jsp)
  - 패턴의 로직
    - 사용자가 컨트롤러 호출 하면 -> 컨트롤러가 스펙 확인 -> 서비스 , 리포지토리 등을 실행 
    - 모델에 데이터 담아서 뷰에 전달 
    - 뷰가 제어권을 넘겨받아서 html 만들어서 클라이언트에 전달 
- MVC 패턴 - 적용
  - 적용방법
    - 서블릿을 컨트롤러, jsp를 뷰로 사용해보자.
    - 모델은 HttpServletRequest 객체를 사용한다(객체 내부의 데이터 저장소 를 사용 setAttribute, getAttribute 를 이용하자 )
  - dispatcher.forward : 서버안에서 다른 서블릿이나 Jsp 로 이동할 수 있는 기능, 호출 하기 
    - WEB-INF 내부의 자원 들은 컨트롤러를 거쳐서 forward 해야만 접근할 수 있다. 
    - redirect VS forward 
      - 리다이렉트는 실제 웹 브라우저에 응답이 나갔다가 클라이언트가 redirect 경로로 다시 요청한다. 그래서 클라이언트가 인지 할 수 있고, url 경로도 변경 됨
      - 포워드는 서버 내부의 호출이므로 클라이언트가 전혀 인지 할 수 없다. 
  - View 에서 jsp 의 문법, jstl 을 사용해서 자바 코드 없이 깔끔 하게 코드 작성 가능 
- MVC 패턴 - 한계
  - 컨트롤러에 중복이 많고 필요하지 않은 코드들도 많다. 
    - 포워드 중복 
    - viewPath 중복(뷰 를 바꾸게 되면 전체 코드를 다 바꾸어야 한다.)
  - 공통 처리가 어렵다. -> 공통 메서드로 처리 한다고 해도 호출 하는 코드가 중복된다. 
  - 컨트롤러 호출 전에 공통 기능을 처리하는 역할이 필요하다. --> 프론트 컨트롤러 패턴 으로 해결?!
- 서블릿,jsp, mvc 패턴 정리 
  - 회원 저장, 목록 조회 기능 
  - 서블릿 : 자바코드 메인 + html  사용 불편 
  - jsp : html메인 + java 코드 사용 섞임 
  - mvc 패턴 : 컨트롤러, 모델, 뷰 로 역할들을 분리, 개발 은 편리 해졌지만 컨트롤러의 유지 보수가 어려움 
  - 프론트 컨트롤러 패턴
- mvc 프레임워크 만들기 
  - 프론트 컨트롤러 패턴 소개 
    - 입구는 하나! 
      - 프론트 컨트롤러 서블릿이 모든 클라이언트의 요청을 받음, 
      - 공통적인 기능은 프론트 컨트롤러가 관리 
      - 프론트 컨트롤러가 요청에 맞는 컨트롤러를 찾아서 호출 
    - 프론트 컨트롤러 외 나머지 컨트롤러는 서블릿을 사용하지 않아도 된다. 
    - 스프링 웹 mvc의 핵심!(DispatcherSerlvet이 FrontController 패턴으로 구현 되어있음)
- 42 서울 사전 미팅 실패 ㅠㅠ 다음달을 노려본다! 